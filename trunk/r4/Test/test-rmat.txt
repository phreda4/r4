
^r4/lib/gui.txt
^r4/lib/rsprite.txt
^r4/lib/bmr.txt

^inc/dibujos.rmt
^inc/pelea.spr
^inc/pelea.vsp

^inc/pablo.bmr


#r1 1.0 'new1 0 0 0 0 0 0
#r2 1.0 'new2 0 0 0 0 0 0

#rn )( 1024

#arbol )( 8192

:arbolmap | 'vec -- | 'vec 'arbol @arbol
	'arbol ( @+ 1? )( pick2 exec ) 2drop ;

:arbolview 
	'new1 pick2 4 + !
	;

:rnmap
	'rn 10 ( 1? )( 1- swap pick2 exec 32 + swap ) 2drop ;

|#tiles t01 t1 t2 t3 t4

:main
|	[ rand8 $1f and 1+ ( 1? )( 1- swap dup rstep swap ) drop ; ] rnmap
	'rn 10 ( 1? )( 1-
		'new0 pick2 4 + !
		swap 32 + swap
		) 2drop
	'rn 10 ( 1? )( 1- swap
		rand8 $1f and 1+ ( 1? )( 1- swap dup rstep swap ) drop
		32 + swap ) 2drop		
	usogui
	show clrscr
		dup "%d" print cr
		omode
		0 0 2.0 mtrans
		'r1 rplay
		'r2 rplay

|		xymouse pos 100 dup dim 'dib8 nsprite
|		'uno xymouse bmr.draw
	
		-1.6 0 2.0 mtransi
		'rn 10 ( 1? )( 1- swap
			dup rplay
			0.3 0 0 mtransi
			32 + swap ) 2drop

		'exit >esc<
		;

: mark 2 linegr! 33 main ;