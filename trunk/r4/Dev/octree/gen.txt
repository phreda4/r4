| ICOPANI 2014
|---------------------------------------------------
^r4/lib/gui.txt


#col1 #col2 #col3

:genvox | x y z --
	pick2 0.021 * ,f2 ,sp
	over 0.021 * ,f2 ,sp
	dup 0.021 * ,f2 ,sp
	"1 " ,s 
|	col1 ,d ,sp col2 ,d ,sp col3 ,d ,sp
	"0 255 0 " ,s
	10 ,c 13 ,c	

	$f 'col1 +!
	col1 $ff <=? ( drop ; ) drop
	0 'col1 !
	$f 'col2 +!
	col2 $ff <=? ( drop ; ) drop
	0 'col2 !
	$f 'col3 +!
	col3 $ff <=? ( drop ; ) drop
	0 'col1 !
	;

:genfbox | n --
	$f 'col1 !
	0 'col2 !
	0 'col3 !
	>r
	0 ( r <? )(
		0 ( r <? )(
			0 ( r <? )(
				genvox
				1+ ) drop
			1+ ) drop
		1+ ) drop
	rdrop ;

:genfile
	mark
	32 genfbox
	"cubo32.xyz" savemem
	empty ;

:main
	mark
	33
	show clrscr
		dup "%d)" print cr
		'genfile <f1>
		'exit >esc< ;

: main ;