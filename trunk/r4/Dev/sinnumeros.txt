^r4/lib/gui.txt


|	ComponeFrase
#frase  )( 1024
#frase> 'frase

:frase,
	frase> !+ 'frase> ! ;

#fraseA 0

:stopfrase
	;

:clearfrase
	'frase 'frase> ! ;

:hablaMilagros
	-1 sinfo 1? ( drop ; ) drop

	fraseA 0? ( drop ; )
	dup 0 sinfo 0? ( 2drop ; ) drop
	@+ 1? (  splay )( nip )
	'fraseA ! ;

|--------------------------------
#s0 #s1 #s2 #s3 #s4 #s5 #s6 #s7 #s8 #s9
#s11 #s12 #s13 #s14 #s15 #s16 #s17 #s18 #s19
#s10 #s20 #s30 #s40 #s50 #s60 #s70 #s80 #s90
#s100 #s200 #s300 #s400 #s500 #s600 #s700 #s800 #s900
#s10y #s20y #s30y #s40y #s50y #s60y #s70y #s80y #s90y

#sUN
#sMillones
#sUnMillon
#sMil

:playU 2 << 's0 + @ frase, ;
:playDb 2 << 's11 + @ frase, ;
:playD 2 << 's10 + @ frase, ;
:playC 2 << 's100 + @ frase, ;
:playDe 2 << 's10y + @ frase, ;

:decena | nro decena -- nro
	0? ( drop ; )
	over 10 mod 0? ( drop 1- playD ; )
	swap 1 =? ( drop 1- playDb 0 nip ; )
	nip 1- playDe  ;

:cien2texto | nro 0 --
	swap 0? ( 2drop ; )
	100 =? ( 0 nip playC drop ; )
	dup 100 / 10 mod
	1? ( 1- playC )( drop )
	dup 10 / 10 mod
	decena
	10 mod
	0? ( 2drop ; )
	1 =? ( swap 0? ( sUN splay 2drop ; ) drop )( nip )
	1- playU ;

::nro2say | nro --
	clearfrase
	0? ( dup playU frase, frase, ; )
	dup 1000000 / 1000 mod
	1 >? ( 0 cien2texto sMillones frase, )( 1 =? ( sUnMillon frase, ) drop )
	dup 1000 / 1000 mod
	1 >? ( 0 cien2texto sMil frase, )( 1 =? ( sMil frase, ) drop )
	1000 mod
	1 cien2texto
	0 frase, ;


:saynro | nro --
	nro2say
	;

#nro

:teclado
	show clrscr

		0 sinfo " SINFO:%d " print cr
		1 sinfo " SINFO:%d " print cr
		2 sinfo " SINFO:%d " print cr
		-1 sinfo " SINFO:%d " print cr

|		nro " %d" print
		[ s1 splay ; ] <f1>
		[ 240 saynro  ; ] <f2>

		hablaMilagros
		'exit >esc<
		cminiflecha
	;

:main
	teclado ;

:sonidos
	"media/sinnumeros/0cero.ogg" sload 's0 !
	"media/sinnumeros/1uno.ogg" sload 's1 !
	"media/sinnumeros/2dos.ogg" sload 's2 !
	"media/sinnumeros/3tres.ogg" sload 's3 !
	"media/sinnumeros/4cuatro.ogg" sload 's4 !
	"media/sinnumeros/5cinco.ogg" sload 's5 !
	"media/sinnumeros/6seis.ogg" sload 's6 !
	"media/sinnumeros/7siete.ogg" sload 's7 !
	"media/sinnumeros/8ocho.ogg" sload 's8 !
	"media/sinnumeros/9nueve.ogg" sload 's9 !
	"media/sinnumeros/10diez.ogg" sload 's10 !
	"media/sinnumeros/11once.ogg" sload 's11 !
	"media/sinnumeros/12doce.ogg" sload 's12 !
	"media/sinnumeros/13trece.ogg" sload 's13 !
	"media/sinnumeros/14catorce.ogg" sload 's14 !
	"media/sinnumeros/15quince.ogg" sload 's15 !
	"media/sinnumeros/16dieciseis.ogg" sload 's16 !
	"media/sinnumeros/17diecisiete.ogg" sload 's17 !
	"media/sinnumeros/18dieciocho.ogg" sload 's18 !
	"media/sinnumeros/19diecinueve.ogg" sload 's19 !
	"media/sinnumeros/20veinte.ogg" sload 's20 !
	"media/sinnumeros/30treinta.ogg" sload 's30 !
	"media/sinnumeros/40cuarenta.ogg" sload 's40 !
	"media/sinnumeros/50cincuenta.ogg" sload 's50 !
	"media/sinnumeros/60sesenta.ogg" sload 's60 !
	"media/sinnumeros/70setenta.ogg" sload 's70 !
	"media/sinnumeros/80ochenta.ogg" sload 's80 !
	"media/sinnumeros/90noventa.ogg" sload 's90 !
	"media/sinnumeros/100cien.ogg" sload 's100 !
	"media/sinnumeros/200doscientos.ogg" sload 's200 !
	"media/sinnumeros/300trescientos.ogg" sload 's300 !
	"media/sinnumeros/400cuatrocientos.ogg" sload 's400 !
	"media/sinnumeros/500quinientos.ogg" sload 's500 !
	"media/sinnumeros/600seicientos.ogg" sload 's600 !
	"media/sinnumeros/700setecientos.ogg" sload 's700 !
	"media/sinnumeros/800ochocientos.ogg" sload 's800 !
	"media/sinnumeros/900novecientos.ogg" sload 's900 !
	"media/sinnumeros/un.ogg" sload 'sUN !
	"media/sinnumeros/Millones.ogg" sload 'sMillones !
	"media/sinnumeros/UnMillon.ogg" sload 'sUnMillon !
	"media/sinnumeros/Mil.ogg" sload 'sMil !

	;

: sonidos main ;