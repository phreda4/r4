| zbitmap
| phreda 2014

#zbuff

:memzbuff
	here 'zbuff !
	$3ffff 'here +!
	;

:clarzbuff
	zbuff >r $3ffff ( 1? )( 1- 0 r!+ ) drop rdrop
	;

:zsetxy | x y --
	8 << zbuff +
	over 3 >> $3 not and +
	1 rot $1f and <<
	over @ or
	swap ! ;

:zsetxyt | x y --
	8 << zbuff +
	over 3 >> $3 not and +	| x dirx
	1 rot $1f and <<        | dirx maskx
	over @ over and? ( 3drop ; ) | dirx maskx inm
	or swap ! ;

| directo, sin bitmap

:zbuf@ | x y -- zb
	10 << + zbuff + @ ;
:zbuf! | c x y --
	10 << + zbuff + ! ;

